# $FreeBSD$

PORTNAME=pfSense-pkg-@PACKAGE_TARNAME@
PORTVERSION=@PACKAGE_VERSION@
PORTREVISION=1
CATEGORIES=security
MASTER_SITES=
MAINTAINER=team@netify.ai
COMMENT=Netify FWA for pfSense
LICENSE=GPLv3+
LICENSE_FILE=${WRKSRC}/LICENSE
DISTNAME=@PACKAGE_TARNAME@-@PACKAGE_VERSION@

#RUN_DEPENDS=netifyd>=2.97:security/netifyd

USES=gmake
GNU_CONFIGURE=1

SUB_FILES=pkg-install pkg-deinstall
SUB_LIST=PORTNAME=${PORTNAME}

post-install:
	${MKDIR} ${STAGEDIR}${DATADIR}
	${MKDIR} ${STAGEDIR}${PREFIX}/etc/netify-fwa
	${MKDIR} ${STAGEDIR}${PREFIX}/pkg/netify-fwa
	${MKDIR} ${STAGEDIR}${PREFIX}/www/netify-fwa

	${INSTALL_DATA} ${FILESDIR}${DATADIR}/info.xml \
		${STAGEDIR}${DATADIR}
	${INSTALL_DATA} -m 0644 ${FILESDIR}${PREFIX}/pkg/netify-fwa.xml \
		${STAGEDIR}${PREFIX}/pkg
	${INSTALL_DATA} ${FILESDIR}${PREFIX}/pkg/netify-fwa/netify-fwa.inc \
		${STAGEDIR}${PREFIX}/pkg/netify-fwa
	${INSTALL_DATA} ${FILESDIR}${PREFIX}/pkg/netify-fwa/netify-fwa_defs.inc \
		${STAGEDIR}${PREFIX}/pkg/netify-fwa
	${INSTALL_DATA} ${FILESDIR}${PREFIX}/www/netify-fwa/netify-fwa_status.php \
		${STAGEDIR}${PREFIX}/www/netify-fwa

.include <bsd.port.mk>
